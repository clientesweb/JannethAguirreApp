class Properties {
    constructor() {
        this.properties = [
            { 
                id: 1, 
                title: "DEPARTAMENTOS EN VENTA", 
                price: "NUEVO SAMBORONDON", 
                image: "img/nuevosamborombon.png", 
                type: "venta",
                description: "¡Oportunidad única! Hermoso departamento en la exclusiva zona de Nuevo Samborondón. Este espacioso hogar cuenta con 2 habitaciones, 2 baños modernos, cocina abierta, sala y comedor acogedores. Áreas sociales incluyen piscina, gimnasio y salón de eventos. Seguridad 24/7 con conserjería y vigilancia.",
                features: [
                    "2 habitaciones con armarios empotrados",
                    "2 baños modernos con acabados de alta calidad",
                    "Cocina abierta con muebles a medida",
                    "Sala y comedor acogedores",
                    "Áreas sociales: piscina, gimnasio, salón de eventos",
                    "Seguridad 24/7 con conserjería y vigilancia"
                ],
                gallery: [
                    "https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600566752355-35792bedcfea?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600566752547-33cce5195f64?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600566752421-3ec9c3ec7dfb?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600566752734-2a0cd53b9f58?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80"
                ]
            },
            { 
                id: 2, 
                title: "DEPARTAMENTOS EN VENTA", 
                price: "ISLA MOCOLI", 
                image: "img/isla.png", 
                type: "venta",
                description: "Ubicados en una de las zonas más prestigiosas y exclusiva  de la ciudad, estos departamentos ofrecen una combinación perfecta de estilo, comodidad y privacidad.Proyecto exclusivo de departamentos de 3 habitaciones en Isla Mocoli.",
                features: [
                    "3 habitaciones amplias y bien iluminadas",
                    "3,5  baños completos",
                    "Vistas impresionantes a la  Isla y de la ciudad",
                    "Área de lavado y secado",
                    "Seguridad 24/7, Gimnasio, Piscina",
                    "Estacionamiento privado y de visitas"
                ],
                gallery: [
                    "https://images.unsplash.com/photo-1600607687644-c7f34e88598f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607687668-0b7b4bf7a00a?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607687710-040798eea3fa?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80"
                ]
            },
            { 
                id: 3, 
                title: "LOCALES COMERCIALES", 
                price: "Consultar", 
                image: "img/localescomerciales.png", 
                type: "alquiler",
                description: "Oportunidad única de invertir en locales comerciales en Nuevo Samborondon  Estos locales ofrecen una combinación perfecta de ubicación, visibilidad y potencial de crecimiento.Nuestros locales comerciales están diseñados para satisfacer las necesidades de los empresarios más exigentes. Ofrecemos:",
                features: [
                    "Locales de diferentes tamaños y diseños para adaptarse a sus necesidades específicas.",
                    "Ventanas y fachadas amplias para maximizar la visibilidad.",
                    "Acceso fácil para clientes y empleados.",
                    "Instalaciones modernas y bien mantenidas."
                ],
                gallery: [
                    "https://images.unsplash.com/photo-1600607687954-e85aa7b46ca3?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607687968-d7a205ad5e7a?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607687985-a6ad18e3c1d8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80"
                ]
            },
            { 
                id: 4, 
                title: "CASAS PERSONALIZADAS", 
                price: "Consultar", 
                image: "https://images.unsplash.com/photo-1600607688969-a5bfcd646154?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80", 
                type: "venta",
                description: "Nuestra empresa cuenta con un equipo de expertos en construcción y diseño que trabajan juntos para crear casas personalizadas que se adaptan a las necesidades y gustos de cada cliente.Nuestro objetivo es hacer que su sueño de tener una casa perfecta se convierta en realidad.",
                features: [
                    "Diseño personalizado: trabajamos con usted para crear un diseño que se adapte a su estilo de vida y preferencias.",
                    "Materiales de alta calidad: utilizamos materiales de alta calidad para garantizar la durabilidad y eficiencia energética de su casa.",
                    "Construcción rápida y eficiente: nuestra experiencia y tecnología nos permiten construir casas de manera rápida y eficiente sin comprometer la calidad.",
                    "Atención al detalle: nos enfocamos en los detalles para asegurarnos de que su casa sea perfecta.",
                    "No pierda la oportunidad de tener la casa de sus sueños. ¡Contáctenos hoy mismo para obtener más información y programar una reunión!"
                ],
                gallery: [
                    "https://images.unsplash.com/photo-1600607688960-a5bfcd646154?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607688951-a5bfcd646154?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607688942-a5bfcd646154?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80"
                ]
            },
            { 
                id: 5, 
                title: "DEPARTAMENTOS EN CUENCA", 
                price: "Consultar", 
                image: "img/departamentoscuenca.png", 
                type: "venta",
                description: "Oportunidad única de invertir en un departamento en Cuenca, ideal para Airbnb.",
                features: [
                    "2  Y 3 habitaciones amplias y bien iluminadas",
                    "2  Y 3  baños completos",
                    "Salón-comedor con cocina integrada",
                    "con vistas impresionantes a la ciudad",
                    "Áreas sociales: piscina, gimnasio, salón de eventos",
                    "Seguridad 24/7 con conserjería y vigilancia"
                ],
                gallery: [
                    "https://images.unsplash.com/photo-1600607688921-a5bfcd646154?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607688912-a5bfcd646154?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80",
                    "https://images.unsplash.com/photo-1600607688903-a5bfcd646154?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&h=600&q=80"
                ]
            }
        ];
        this.render();
        this.initSlider();
        this.addEventListeners();
    }

    render() {
        const properties = document.getElementById('properties');
        properties.innerHTML = `
            <div class="py-16 fade-in-section">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center mb-8 text-primary">Nuestras Propiedades</h2>
                    <div class="properties-slider overflow-x-auto">
                        <div id="properties-grid" class="flex space-x-4 pb-4">
                            ${this.properties.map(property => this.createPropertyCard(property)).join('')}
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    createPropertyCard(property) {
        return `
            <div class="property-card">
                <img src="${property.image}" alt="${property.title}" class="w-full h-48 object-cover">
                <div class="p-4">
                    <h3 class="font-bold text-xl mb-2">${property.title}</h3>
                    <p class="text-gray-700 text-base mb-4">${property.price}</p>
                    <button class="bg-primary text-white px-4 py-2 rounded hover:bg-primary/90 transition-colors view-details" data-id="${property.id}">Ver Detalles</button>
                </div>
            </div>
        `;
    }

    initSlider() {
        const slider = document.querySelector('.properties-slider');
        let isDown = false;
        let startX;
        let scrollLeft;

        slider.addEventListener('mousedown', (e) => {
            isDown = true;
            slider.classList.add('active');
            startX = e.pageX - slider.offsetLeft;
            scrollLeft = slider.scrollLeft;
        });

        slider.addEventListener('mouseleave', () => {
            isDown = false;
            slider.classList.remove('active');
        });

        slider.addEventListener('mouseup', () => {
            isDown = false;
            slider.classList.remove('active');
        });

        slider.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - slider.offsetLeft;
            const walk = (x - startX) * 3;
            slider.scrollLeft = scrollLeft - walk;
        });
    }

    addEventListeners() {
        document.addEventListener('click', (e) => {
            if (e.target && e.target.classList.contains('view-details')) {
                const propertyId = parseInt(e.target.dataset.id);
                const property = this.properties.find(p => p.id === propertyId);
                this.showPropertyModal(property);
            }
        });
    }

    showPropertyModal(property) {
        const event = new CustomEvent('showGalleryModal', { detail: property });
        document.dispatchEvent(event);
    }
}